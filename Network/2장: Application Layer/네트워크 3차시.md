# 네트워크 3차시

#### Mail access protocol
서버에서 메일을 받는 역할을 하는 프로토콜.
- POP3: 예전에는 *download-delete* 모드였지만, 지금은 *download-keep* 모드로 동작한다. **stateless**한 프로토콜이며 세션 간 상태를 유지하지 않는다.
- IMAP: 메일을 다운로드하는 POP3 방식과 달리 서버에서 메일들을 관리한다. 서버에 폴더를 만들어 메일들을 따로 관리할 수 있다. 상태를 유지해야 한다.
- HTTP: 웹 메일일 경우에 사용. gmail, Hotmail, Yahoo의 경우.

### DNS(Domain Name System)
사용자가 일반적으로 사용하는 호스트 네임(예: www.korea.ac.kr)을 32비트 주소인 IP 주소로 변환해 주는 디렉터리 서비스를 일컫는다. **분산 데이터베이스**를 통해 매핑 정보를 담고 있다.

#### DNS 서비스
- 호스트 네임을 IP 주소로 변환
- 호스트 앨리어싱(host aliasing): 간단한 별칭 호스트 네임을 복잡한 정식 호스트 네임으로 변환해줌.
- 메일 서버 앨리어싱(mail server aliasing)
- 부하 분산(load distribution): 요청이 많이 들어오는 서버의 경우 복사 서버를 갖고 있는 경우가 있는데 DNS는 요청들이 들어올 때 이것들을 분산해서 나눠준다.

#### DNS - 분산 계층 데이터베이스
- 루트 DNS 서버: 도메인 별 TLD 서버를 알고 있다.
- TLD(Top-Level Domain) 서버: com, org, net, edu와 kr, uk, fr 같은 상위 레벨 도메인에 대한 책임. 각 기관 별 책임 DNS 서버를 알고 있음.
- 책임(authoritative) DNS 서버: 기관의 서버의 호스트 네임을 IP 주소로 매핑. 기관의 각 기기의 호스트 네임 to IP 주소 매핑 정보를 다 가지고 있음.

> 단일 중앙 집중 방식 DNS를 사용하지 않는 이유
    - 서버 고장 시 전체 작동하지 않음
    - 트래픽 양
    - 먼 거리의 중앙 집중 데이터베이스
    - 유지관리

- 로컬 DNS 서버: DNS 계층에 속하지 않으며 각 ISP는 로컬 DNS 서버를 가짐.

#### DNS 질의의 동작 예
- 반복적 질의
- 재귀적 질의: 상위 계층 서버에 많은 부담을 주게 됨. 즉, 루트 DNS 서버에 가장 많은 부담을 주게 된다.

#### DNS 캐싱
DNS 서버가 어떤 이름에 대한 받은 응답 정보를 저장. 일반적으로 **로컬 DNS 서버에 TLD 서버들이 캐싱되어 루트 DNS 서버를 자주 방문하지 않게** 된다.

### P2P 어플리케이션
피어끼리 주고받는 어플리케이션. 간헐적으로 연결되며 IP 주소가 변경이 된다.

파일 분배 시간이 클라이언트-서버 구조에 비해 유저의 수가 늘어남에 따라 훨씬 줄어드는 모습을 보인다.

#### BitTorrent
파일을 *청크*라는 단위로 나누고 이 청크를 다른 피어로부터 받는다. 이 청크는 *트래커*로부터 피어들의 리스트를 받아 받기 시작한다.

- 청크 가져오기(Pulling Chunks): 가장 드문 것을 먼저 요청한다.
- 청크 보내기 - 되갚음(tit-for-tat): 자신에게 잘 공급해주는 피어에게 자신도 청크를 잘 보냄.

### 소켓 프로그래밍
어플리케이션 프로세스와 트랜스포트 계층 사이의 인터페이스. 네트워크 어플리케이션은 메시지를 만든 뒤 이 메세지를 OS의 트랜스포트 계층에 부탁해 특정 프로세스로 보낸다.

- UDP: 비연결형, 비신뢰적.
- TCP: 연결형, 신뢰적.

#### UDP를 사용하는 경우
- 비연결형으로 핸드셰이킹 과정 없음.
- 송신 프로세스는 각 패킷마다 수신 프로세스의 IP와 포트 번호를 명시해야 함.
- 서버는 이를 받아 주소를 알게 됨.

#### TCP를 사용하는 경우
서버 쪽에는 환영하는 소켓(door socket)이 있다. 클라이언트쪽 TCP와 서버쪽 TCP가 핸드 셰이킹을 통해 연결을 셋업하면 서버에서는 이 클라이언트를 위한 소켓을 새로 만든다.

