# 네트워크 1차시

강의의 목표는 가장 보편적인 네트워크 인터넷 네트워크의 프로토콜을 공부.

## Chapter 1: Roadmap

### 기본적인 용어
- 호스트(`End system`): 어플리케이션 프로그램을 사용(호스팅)하는 시스템. 주로 컴퓨터를 일컫는다.
- 라우터: 목적지로 가기 위해 거치는 중계자.
- 링크: 이들을 서로 연결.
네트워크 개론 : 쉽게 배우는 네트워크 기본 원리
인터넷은 네트워크들이 모인 네트워크!

### 프로토콜
네트워크들이 서로 통신하기 위한 규약으로 **표준화**가 중요. `RFC`와 `IETF`가 표준안을 제정.

### 프로토콜이 정하는 것
- 메시지의 format
- 메시지 간 order
- 메시지를 받았을 때 행동을 취하기.

### 네트워크
크게 Core와 Edge로 나누어 볼 수 있다.

#### 네트워크 엣지(Edge)
호스트들이 존재. 이들을 네트워크에 연결시켜 주는 것이 **Access network**.

##### Access network
Access network를 특징짓는 중요한 파라미터 **Bandwidth**이다. 다른 말로는 transmission rate이다. 초당 실어 나르는 bits를 말한다.

이 Access network를 해주는 것이 흔히 말하는 인터넷 업체이다. 종류는 다음과 같다.
- DSL(Digital subscriber line): 전화선으로 연결.
  - DSL 모뎀.
  - 전화선은 집마다 독립적이므로 링크 `dedicated`한 특성을 보인다.
  - 각 집에서 음성과 인터넷이 다 들어오기 때문에 central office에는 이것을 나누는 역할을 하는 `multiplexer`가 존재한다.
- Cable(Hybrid Fiber Coax) network: 케이블 네트워크로 연결.
  - 케이블 모뎀.
  - TV와 데이터를 나누는 CMTS가 존재한다.
  - 케이블 선은 여러 집이 공유하므로 대역폭이 큰 `shared`한 링크를 사용한다.

집 안에 네트워크를 구성할 수도 있다.
- Home network
  - 코어에 라우터가 존재. 이 라우터가 모뎀과 연결.
  - 라우터에 컴퓨터는 직접 연결하고 무선은 access point에 연결.

회사나 학교 같은 큰 네트워크
- Enterprise access network(Ethernet)
  - 건물에 있는 엔드 시스템을 다 연결.
  - 각 건물에서 엔드 시스템들은 이더넷 스위치에, 이 스위치들은 다시 외부 네트워크와 연결해주는 라우터에 연결.
  - 이 라우터는 ISP가 준 링크를 통해 ISP의 라우터에 **직접** 연결된다.

Wireless access networks: 둘 다 shared한 네트워크이다.
- wireless LANS
  - 건물 안에서 사용.
  - 대역폭이 큼.
- wide-area wireless access
  - 셀룰러 네트워크

##### 호스트
네트워크 어플리케이션을 호스팅(실행)하기 때문에 붙여진 이름. 이 네트워크 어플리케이션은 다른 컴퓨터의 데이터를 받고 보낸다. 메시지를 보낼 때는 패킷으로 잘라서 보내게 됨. 이 때 중요한 것이 `transmission rate`.

- guided media
  - copper(Ethernet), fiber(HFC의 뒤쪽, 모아졌을 경우), coax(HFC의 앞쪽)
- unguided media
  - radio: 주변에 매우 민감.

#### 네트워크 코어(Core)

##### 두 가지 전달 방법
- Circuit Switching
  - "Call" 셋업을 통해 **경로 결정**과 **자원 예약**을 해야 함.
  - 여기서 중요한 것은 자원을 분할해야 동시성을 보장할 수 있음. `FDM` 방식과 `TDM`방식이 있다.
  - 자원의 예약 특성 때문에 **연속적** 연결인 전화 네트워크에서는 적합하지만 인터넷 네트워크는 **비연속적** 연결이기 때문에 비적합히다. 다른 사용자가 자원을 잡을 수 없다.
- Packet Switching
  - 필요할 때 쓰게끔 한다.
  - 가용 자원이 없다면 먼저 온 transmission이 끝나기를 기다린다.
  - 한 연결이 한 링크를 잡으면 full link capacity를 사용해 각 패킷이 전달된다.
  - 메시지는 너무 길기 때문에 이것을 패킷으로 나누는데, 이 패킷에는 **목적지 주소**가 담겨 있다. 그래서 라우터는 이 패킷을 전부 다 받은 뒤 그 안에 담긴 주소로 다시 forward하게 된다(`store-and-forward`).
  - **queueing delay**가 발생할 수 있다. 도착 속도가 전송 속도보다 높으면 버퍼에 쌓이게 된다. 만약 버퍼가 꽉 차게 된다면 **packet loss**가 발생할 수 있다. 이 상황을 **Congestion**이라 한다.


#### 네트워크의 성능 요소

##### Delay
네 가지 요소가 존재.
- noal processing: 에러 체크와 output 링크 결정.
- queueing delay: 버퍼에 패킷이 쌓이게 되는 현상.
  - Congestion의 유무에 따라 달라지는 **유일하게 가변적인 딜레이**다.
- transmission delay: 링크에 패킷을 밀어넣을 때 발생.
- propagation delay: 링크에서 패킷이 이동하는 시간.

##### Packet loss
큐에 사이즈가 한정적이기 때문에 저장을 못하게 되어 packet의 드랍이 일어날 수 있다. loss가 일어나면 재전송을 해야함.

##### Throughput
단위 시간당 전송된 비트의 양. bandwidth가 더 작은 라인을 따라가게 된다. 이것을 `bottleneck link`라 부른다.

#### 프로토콜

##### 레이어 구조
왜 **레이어링**을 할까?
- 복잡한 시스템을 단순화.
- 모듈화는 유지보수와 업데이트를 쉽게 해준다.

그러면 레이어의 단점은?
- 모듈들의 기능이 중복될 수 있다.
- 레이어가 통신 비용이 발생.

그래서 레이어링을 하는 것이 **최적의 방안이 아닐 수도 있다**.

##### Internet protocol stack
데이터의 전송은 각 계층이 그것의 아래 계층의 서비스를 이용해서 이루어진다.
- application: supporting network applications. 
  - 유저가 어플리케이션을 통해 발생시킨 데이터를 포장해서 `message(메시지)`를 만드는 역할.
  - FTP(file), SMTP(email), HTTP(web)
- transport: process-process data transfer.
  - 만들어진 메시지를 보내는 역할.
  - 목적지 프로세스에 잘 전달이 되었는지를 알 수 있는 헤더를 메시지에 붙이게 되는데 이를 `segment`라 한다.
  - TCP, UDP
- network: routing of datagrams from source to destination
  - 소스부터 목적지까지 길을 찾는 역할.
  - 목적지의 호스트에 잘 전달이 되었는지를 체크하는 헤더를 세그먼트에 붙이게 되는데 이를 `datagram`이라 한다.
  - IP, routing protocols
- link: data transfer between neighboring netwrok elements
  - 각 홉을 건너기 위해 라인에 데이터를 밀어내는 역할.
  - 한 홉을 잘 건너는지 체크하는 헤더를 붙이는데 이것이 `frame`이 된다.
  - **한 홉을 건널 때마다 이 프레임은 달라지게 된다**. 즉, 소스로부터 온 프레임은 다시 스위치에 의해 떼어져 프레임으로 만들어지고 다시 라우터는 이것을 받아 자신의 프레임으로 만든 뒤 최종 데스티네이션으로 보낸다.
  - Ethernet, WiFi, PPP
- physical: bits "on the wire"
  - 실제로 데이터(프레임)가 전송됨.

프로토콜 스택을 살펴보면, 소스와 데스티네이션은 모든 스택을 다 갖춘다. 그에 반해 스위치는 링크 스택까지, 라우터는 네트워크 스택까지 가지는 것을 볼 수 있다. 각 계층에서 만들어 내는 데이터 유닛을 `Protocol Data Unit(PDU)`라고 한다.

##### 네트워크 보안
- malware
활성화되는 방식으로 나눈다.
  - virus: 받아서 실행되야 동작.
  - worm: 받기만 하면 동작.
- Botnet: 스팸이나 DDoS 역할을 하는 감염된 컴퓨터 모음.
- DoS: 의도적으로 계속 요청을 보내어 정상적인 요청을 막는 공격.
- packet sniffing: broadcast media가 공유되기 때문에 트래픽을 몰래 볼 수가 있다.
- IP spoofing: 다른 이인척 해서 권한이 없는 정보를 얻는 공격.